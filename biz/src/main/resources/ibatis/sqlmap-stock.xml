<?xml version="1.0" encoding="GB2312"?>
<!DOCTYPE sqlMap
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="stock">
	
	<typeAlias alias="stock" type="com.hsh24.admin.api.stock.bo.Stock" />
	
	<select id="getStats" parameterClass="stock" resultClass="stock">
	<![CDATA[
		SELECT SUM(t.goods_num) AS stock
		  FROM oms.wm_account_t t, oms.main_warehouse_t w, dms_tb_org_shop q
		 WHERE w.warehouse_id = t.warehouse_id
		   AND q.shop_id = w.org_id
		   AND q.state = 'U'
		   AND q.org_id = #orgId#
	]]>
	</select>
	
	<select id="getStockList1" parameterClass="stock" resultClass="stock">
	<![CDATA[
		SELECT SUM(t.goods_num) AS stock,
			   w.org_id AS shopId
		  FROM oms.wm_account_t t, oms.main_warehouse_t w, dms_tb_org_shop q
		 WHERE w.warehouse_id = t.warehouse_id
		   AND q.shop_id = w.org_id
		   AND q.state = 'U'
		   AND q.org_id = #orgId#
		  GROUP BY w.org_id
	]]>
	</select>
	
	<select id="getStockList2" parameterClass="stock" resultClass="stock">
	<![CDATA[
		SELECT g.goods_nm AS itemName,
			   t.goods_num AS stock
		  FROM oms.wm_account_t t, oms.main_goods_v g, oms.main_warehouse_t w, dms_tb_org_shop q
		 WHERE g.goods_id = t.goods_id
		   AND g.goods_spec_id = t.goods_spec_id
		   AND g.goods_mode = t.goods_mode
		   AND w.warehouse_id = t.warehouse_id
		   AND q.shop_id = w.org_id
		   AND q.state = 'U'
		   AND w.org_id = #shopId#
		   AND q.org_id = #orgId#
	]]>
	</select>
	
</sqlMap>